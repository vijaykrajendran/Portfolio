---
title: 'Load Balancing Multiple Backend Services'
date: '2025-11-16'
draft: false
summary: 'High availability setup'
images: ['/static/courses/learn-nginx/chapter9/banner.png']
authors: ['default']
---

# Load Balancing Production Setup

## Full HA Config

```nginx
upstream backend {
    least_conn;

    server backend1:8080 weight=2 max_fails=3 fail_timeout=30s;
    server backend2:8080 weight=2 max_fails=3 fail_timeout=30s;
    server backend3:8080 weight=1 max_fails=2 fail_timeout=30s;

    server backup:8080 backup;
}

server {
    location / {
        proxy_pass http://backend;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

High availability!
